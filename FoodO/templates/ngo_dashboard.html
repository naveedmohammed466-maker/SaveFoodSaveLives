<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NGO Dashboard | Food Waste Management</title>
    <style>
        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
            font-family:'Segoe UI', sans-serif;
        }

        body{
            background: linear-gradient(to right, #d4fc79, #96e6a1);
            min-height:100vh;
            padding-bottom:60px;
        }

        /* Navigation Bar */
        .nav{
            background: #2f7d32;
            padding:15px 30px;
            color:#fff;
            font-size:20px;
            display:flex;
            justify-content:space-between;
            align-items:center;
        }

        .nav span{
            font-weight:bold;
        }

        .logout{
            background:#fff;
            color:#2f7d32;
            padding:8px 16px;
            border-radius:8px;
            text-decoration:none;
            font-size:14px;
            font-weight:bold;
        }

        /* Dashboard */
        .container{
            width:90%;
            max-width:1100px;
            margin:30px auto;
        }

        .stats{
            display:grid;
            grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
            gap:20px;
            margin-bottom:30px;
        }

        .card{
            background:#fff;
            padding:20px;
            border-radius:16px;
            box-shadow:0 8px 20px rgba(0,0,0,0.15);
            text-align:center;
        }

        .card h3{
            font-size:30px;
            color:#2f7d32;
        }

        .card p{
            margin-top:8px;
            color:#555;
            font-weight:600;
        }

        /* Food cards */
        .food-list{
            display:grid;
            grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));
            gap:20px;
        }

        .food-card{
            background:white;
            border-radius:16px;
            box-shadow:0 8px 20px rgba(0,0,0,0.15);
            padding:20px;
        }

        .food-card h4{
            color:#333;
            margin-bottom:6px;
        }

        .food-card p{
            font-size:14px;
            color:#555;
            margin:4px 0;
        }

        .pickup-btn{
            margin-top:10px;
            background:#2f7d32;
            color:white;
            border:none;
            padding:10px;
            border-radius:8px;
            width:100%;
            font-weight:bold;
            cursor:pointer;
        }

        .pickup-btn:hover{
            background:#256628;
        }

        footer{
            position:fixed;
            bottom:0;
            left:0;
            width:100%;
            background:rgba(0,0,0,0.3);
            color:white;
            text-align:center;
            padding:10px;
            font-size:14px;
        }
    </style>
</head>
<body>

<!-- Navbar -->
<div class="nav">
    <span>üå± NGO Dashboard</span>
    <a href="#" class="logout">Logout</a>
</div>

<div class="container">

{% if messages %}
    {% for message in messages %}
        <div style="background:#2f7d32; color:white; padding:10px; border-radius:8px; margin:10px;">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

{% if message %}
<div style="background:#d4edda; padding:12px; border-radius:10px; color:#155724; font-weight:bold; margin-bottom:20px;">
    {{ message }}
</div>
{% endif %}

    <!-- Statistics -->
    <div class="stats">
    <div class="card">
        <h3>{{ stats.food_rescued }} Kg</h3>
        <p>Food Rescued</p>
    </div>
    <div class="card">
        <h3>{{ stats.people_fed }}</h3>
        <p>People Fed</p>
    </div>
    <div class="card">
        <h3>{{ stats.pickup_requests }}</h3>
        <p>Pickup Requests</p>
    </div>
</div>

    <!-- Available Food List -->
    <h2 style="margin-bottom:15px;">üçΩÔ∏è Available Food Donations</h2>

    <div class="food-list">

       <div class="food-list">
    {% if donations %}
        {% for food in donations %}
        <div class="food-card">
            <h4>{{ food.restaurant }}</h4>
            <p>Food: {{ food.food_name }} ({{ food.food_type }})</p>
            <p>Quantity: {{ food.quantity }} Kg</p>
            <p>Location: {{ food.location }}</p>
            <p>Available Till: {{ food.available_till }}</p>
            {% if food.notes %}
            <p>Notes: {{ food.notes }}</p>
            {% endif %}
           <form method="POST">
    {% csrf_token %}
    <input type="hidden" name="donation_id" value="{{ food.id }}">
    <a href="{% url 'request_pickup' food.id %}">
    <button class="pickup-btn">Request Pickup</button>
</a>

</form>

        </div>
        {% endfor %}
    {% else %}
        <p style="text-align:center; font-weight:bold; color:#2f7d32;">No food donations available yet.</p>
    {% endif %}
</div>


    </div>

</div>

<footer>
    ¬© 2025 Food Waste Management System
</footer>

</body>
</html>
